<title>My First Leaflet Map</title>

<meta charset=utf-8 />
<title>Searching feature layers</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

<!-- Load Leaflet from CDN -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
      integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
      crossorigin=""/>

<!-- Load Esri Leaflet from CDN -->
<script src="https://unpkg.com/esri-leaflet@2.2.4/dist/esri-leaflet.js"
        integrity="sha512-tyPum7h2h36X52O2gz+Pe8z/3l+Y9S1yEUscbVs5r5aEY5dFmP1WWRY/WLLElnFHa+k1JBQZSCDGwEAnm2IxAQ=="
        crossorigin=""></script>

<!-- Load Esri Leaflet Geocoder from CDN -->
<link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.2.14/dist/esri-leaflet-geocoder.css"
      integrity="sha512-v5YmWLm8KqAAmg5808pETiccEohtt8rPVMGQ1jA6jqkWVydV5Cuz3nJ9fQ7ittSxvuqsvI9RSGfVoKPaAJZ/AQ=="
      crossorigin="">
<script src="https://unpkg.com/esri-leaflet-geocoder@2.2.14/dist/esri-leaflet-geocoder.js"
        integrity="sha512-uK5jVwR81KVTGe8KpJa1QIN4n60TsSV8+DPbL5wWlYQvb0/nYNgSOg9dZG6ViQhwx/gaMszuWllTemL+K+IXjg=="
        crossorigin=""></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>

<style>
  .chart-container {
    height: 245px;
    width: 245px;
  }

  #info-pane {
    position: absolute;
    top: 70px;
    right: 10px;
    z-index: 400;
    padding: 1em;
    background: white;
  }
</style>

<style>
  body { margin:0; padding:0; }
  #map { position: absolute; top:0; bottom:0; right:0; left:0; }
</style>


<style>
  #map { height: 800px; }
</style>




<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
      integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
      crossorigin=""/>
<link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.2/dist/leaflet.draw.css" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.rawgit.com/mejackreed/Leaflet-IIIF/v2.0.1/leaflet-iiif.js"></script>
<script src="https://unpkg.com/leaflet-draw@1.0.2/dist/leaflet.draw.js"></script>

<script src="https://npmcdn.com/leaflet-geometryutil"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/gokertanrisever/leaflet-ruler/master/src/leaflet-ruler.css">
<script src="https://cdn.rawgit.com/gokertanrisever/leaflet-ruler/master/src/leaflet-ruler.js"></script>


<script src='https://npmcdn.com/@turf/turf/turf.min.js'></script>



<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<%= javascript_include_tag('lib/leaflet.ajax.min.js') %>
<style>

  #info-pane {
    position: absolute;
    top: 70px;
    right: 10px;
    z-index: 400;
    padding: 1em;
    background: white;
  }
</style>

<style>
  body { margin:0; padding:0; }
  #map { position: absolute; top:0; bottom:0; right:0; left:0; }
</style>


<style>
  #map { height: 800px; }
</style>

<div id="map"></div>




<script>




  var map = L.map('map',{
      center: [36.1700, 5.5199],
      zoom: 12
  });
  var tileUrl = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
}).addTo(map);

function popUp(features,layer) {
        layer.bindPopup(
            'Ville :  ' + features.properties.ville
            //+'<br>'+ '<img src="'+ features.properties.photo +'" style="width:300px;height:200px;">'
        );

    }

    function colors(hello){
        return hello == null ? '#8856a7' :
                                    '#2c7fb8';
    }

    function style(features) {
        return {
          iconUrl: '../marker-icon.png'
    
        };
    }

    var greenIcon = L.icon({
      iconUrl: '../marker-icon.png',
      
      iconSize:     [38, 95], 
      iconAnchor:   [22, 94], 
      popupAnchor:  [-3, -76] 
  });

var geojsonda1 = new L.GeoJSON.AJAX('../zone_ind_3.json',{onEachFeature: popUp,style: style });

var geojsonda2 = new L.GeoJSON.AJAX('../med.json', {icon: greenIcon});

var geojsonda3 = new L.GeoJSON.AJAX('../spec.json', {icon: greenIcon});

var cities  = L.layerGroup([geojsonda1,geojsonda2,geojsonda3]);


var yes = {
    "ALL ZI SETIF": cities,

};

var geo = {
    "ZI Ouled saber": geojsonda1,
    "med": geojsonda2,
    "spec ": geojsonda3,
    "ALL ZI SETIF": cities
    //"Test filter": promise

};


L.control.layers(yes, geo,{position :'topright'}).addTo(map);



//L.marker([36.19112, 5.41373]).bindPopup('<p>Wilaya<br />Setif</p>').openPopup().addTo(map);

//L.marker([36.763056, 3.050556]).bindPopup('<p>Wilaya<br />Alger</p>').openPopup().addTo(map);

//L.marker([36.365, 6.614722]).bindPopup('<p>Wilaya<br />Constantine</p>').openPopup().addTo(map);

//L.marker([27.870924, -0.285634]).bindPopup('<p>Wilaya<br />Adrar</p>').openPopup().addTo(map);





  </script>